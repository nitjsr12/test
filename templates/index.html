<!DOCTYPE html>
<html lang="en">
<head>
  <title>taste Loan</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3pro.css">
  <!--link href="hide-show-fields-form.css" rel="stylesheet"/-->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='hide-show-fields-form.css') }}">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

</head>
<body style="height:1100px" >

<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
    <img src="{{ url_for('static', filename='PSX_20200101_111300.jpg')}}" height="15%" width="25%" align="center">
    </div>
    
  </div>
</nav>
  
<div class="container" style="margin-top:50px">
  <div class="row">
    <div class="col-md-6">
        <img src="https://cdn.pixabay.com/photo/2017/08/30/07/56/money-2696229_960_720.jpg" style="max-width:100%;" height="700">
    </div> <br>
    <div class="col-md-6">
     <h1 align="center"><b> Enter below details for Loan requirements
 </b></h1><br>
      <form class="p-3" id="loan_form" method="post">
  <div class="form-group">
    <input type="text" id="name" name="firstname" placeholder="Your name.."> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
        <input type="text" id="name1" name="lastname" placeholder="Your last name.."> <br>
        <input type="email" id="email" name="email_id" placeholder="Email ID"> <br>
        <input type="tel" id="mobile" name="mob_no" placeholder="Mob Number"> <br>
        <input type="text" id="pan" name="pan_card" placeholder="Pan card">
  </div>
  <div class="form-group">
    <select class="form" id="seeAnotherField">
          <option value="">Type of Employment</option>
          <option value="yes">a) Self employment</option>
          <option value="No">b) Employed</option>
    </select>
  </div>
  
  <div class="form-group" id="otherFieldDiv_business_value">
   <input type="text" id="otherFieldDiv_text" name="lastname" placeholder="Business Name">
   </div>
  <select class="form" id="otherFieldDiv">
     <option selected name="annual_income_business_name" value="" disabled selected>Select your annual income</option>
     <option value="3 - 12 Lacs">3 - 12 Lacs</option>
     <option value="12 - 30 Lacs">12 - 30 Lacs</option>
     <option value="30 - 60 Lacs">30 - 60 Lacs</option>
     <option value="60 Lacs - 1 Crore">60 Lacs - 1 Crore</option>
    <option value="More than 10 Crores">More than 10 Crores</option>
  </select>
  <select class="form" id="howOld">
     <option selected name="how_old_is_business" value="" disabled selected>How Old is Your Business</option>
     <option value="Less than 1 Year">Less than 1 Year</option>
     <option value="1-3 Years">1-3 Years</option>
     <option value="3-6 Years">3-6 Years</option>
     <option value="6-10 Years">6-10 Years</option>
    <option value="More than 10 Years">More than 10 Years</option>
  </select>

  <!--input type="submit" value="Submit"-->
  <button type="submit" class="btn btn-primary" align="center" onclick="getFormDetails()">Submit</button>
  
  <!--div class="form-group" id="otherFieldDiv1">
      <select class="form" id="otherFieldDiv1">
     <option selected value="" disabled selected>Select your annual income</option>
     <option value="3 - 12 Lacs">3 - 12 Lacs</option>
     <option value="12 - 30 Lacs">12 - 30 Lacs</option>
     <option value="30 - 60 Lacs">30 - 60 Lacs</option>
     <option value="60 Lacs - 1 Crore">60 Lacs - 1 Crore</option>
    <option value="More than 10 Crores">More than 10 Crores</option>
  </select>

    </div-->
</form>


      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
<script >
    $("#seeAnotherField").change(function() {
    if ($(this).val() == "yes") {
        $('#otherFieldDiv').show();
		$('#otherFieldDiv_text').show();
		$('#howOld').show();
		
    } else if (($(this).val() == "No")) {

        $('#otherFieldDiv_text').hide();
		$('#howOld').hide();
        $('#otherFieldDiv').show();

    } else {
        $('#otherFieldDiv').hide();
        $('#otherFieldDiv1').hide();
    }
});
$("#seeAnotherField").trigger("change");

</script>
<div class="modal fade" id="myModal" role="dialog">
						<div class="modal-dialog">
						
						  <!-- Modal content-->
						  <div class="modal-content">
							<div class="modal-header">
							  <button type="button" class="close" data-dismiss="modal">Test</button>
							  <h4 class="modal-title">Modal Header</h4>
							</div>
							<div class="modal-body">
							  <p>Some text in the modal.</p>
							</div>
							<div class="modal-footer">
							  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
							</div>
						  </div>
						  
						</div>
</div>
<script>
 function getFormDetails() {
      
		var datastring_split = $("#loan_form").serialize().split("&");
		console.log("Just a Split &");
		console.log(datastring_split);
			var obj={};
			for(var key in datastring_split)
			{
				console.log(datastring_split[key]);
				obj[datastring_split[key].split("=")[0]] = datastring_split[key].split("=")[1];
			}
        console.log("after For loop");
		console.log(obj);
		
		
        var e = document.getElementById("seeAnotherField");
		var text = e.options[e.selectedIndex].text;
		obj['selectedBusinessType'] = text;
		
		if( text == "a) Self employment"){
		    var business_name = document.getElementById('otherFieldDiv_text').text;
			obj['business_name'] = business_name;
			
			var e = document.getElementById("otherFieldDiv");
			var text_annual_income_business_name = e.options[e.selectedIndex].text;
			obj['annual_income'] = text_annual_income_business_name;
			
			var e = document.getElementById("howOld");
			var old_business = e.options[e.selectedIndex].text;
			obj['howOld'] = old_business;
			
			
         } 
		 else if (text == "b) Employed")  {
	        var e = document.getElementById("otherFieldDiv");
			var text_annual_income_business_name = e.options[e.selectedIndex].text;
			obj['annual_income'] = text_annual_income_business_name;
			
	      }
		
		console.log(obj);
		
		
		//alert(JSON.stringify(obj)); 
		
		
		
	
        var xhr = new XMLHttpRequest();
        //var url = "/submitFormDetails";
		var URL = window.location.protocol + "//" + window.location.hostname + ":" + window.location.port + "/submitFormDetails";

		//alert(URL);
		xhr.open("POST", URL, true);
		//xhr.responseType = 'json';
		xhr.setRequestHeader("Content-Type", "application/json");
        //await new Promise(resolve => setTimeout(resolve, 2000));
        //xhr.onreadystatechange = function () {
		    		

          //  if (xhr.readyState === 4 && xhr.status === 200) {
			
			
			 //   alert(xhr.responseText);     
			//	alert('Inside XHR ReadyState');
            //    console.log("Success");
			//	$('#myModal').show();
				
           // }
        //}; 
		//xhr.send(JSON.stringify(obj));
        xhr.send(JSON.stringify(obj));
		alert("Thank you for submitting for the loan request. Our Loan officer will get in touch with you. For any queries you can reach out to support@gmail.com");
		//$('#myModal').show();
		
    }
	
	
	
	

</script>

<script>
function hideAlertNotification() {
	    
		alert("Test");
	
	    $('#myModal').show(); 
		//var alertDiv = document.getElementById('alert_div');
		//alertDiv.style.display = 'none';
	}
</script>




    </div>
  </div> <br>
<meta name="viewport" content="width=device-width, initial-scale=1">
<div class="footer"><br>
  <p align="left">Copyright Â© 2020 [ TASTE LOAN ] | Credits </p>
</div>
</div>
</body>
</html>
